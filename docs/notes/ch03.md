# 第3章 优质代码的通用特性

## 1 契约式设计

- 契约方法（DbC）的理念：与其在代码中隐式地指出对各方的期望，不如双方达成契约，如果违反契约，将引发异常，明确地指出无法继续下去的原因。
- 前置条件：代码运行前将执行的所有检查
- 后置条件：验证组件是否满足了调用者的期望
- 不变量：在函数运行时保持不变的内容，用于验证函数的逻辑是否正确
- 副作用：在文档字符串中，可指出代码的任何副作用
- 主要价值：有效地识别问题出在什么地方，更好地阐明程序的结构

## 2 防御式编程

- 主要理念：如何处理预期的错误以及如何处理绝不应该出现的错误，前者属于错误处理，后者属于断言
- 错误处理的方法：值替换、将错误写入日志、异常处理
- 异常处理的原则：
  1. 在正确的抽象层级处理异常
  2. 不要向最终用户暴露 traceback，不要在异常中暴露任何敏感信息
  3. 避免使用空的 except 代码块
  4. 包含导致问题的原始异常
- 断言：用于识别不应发生的情况
- 异常和断言的通俗解释：异常用于处理程序要考虑的与业务逻辑相关的意外情况，而断言验证代码的正确性

## 3 关注点分离

- 作用：通过最大限度地降低连锁反应来增强可维护性
- 内聚：对象应该有一个小的、定义明确的目标，且功能尽可能少
- 耦合：两个或多个对象相互依赖

## 4 常用术语

- DRY：Don't Repeat Yourself（不要自我重复） 
- OAOO：Once and Only Once（一次仅有一次）
- YAGNI：You Ain't Gonna Need It（你不会需要它），只根据当前需求编写代码，但确保采用的方法不会妨碍未来做进一步改进
- KIS：Keep It Simple（保持简单），设计软件组件时，务必不要过度设计；使用适合解决问题的最小数据结构
- EAFP【推荐】：Easier to Ask Forgiveness than Permission（请求原谅比获得许可容易），编写代码时，直接让它执行操作，如果它不管用，再采取补救措施
- LBYL：Look Before You Leap（三思而后行），检查要使用的资源  

## 5 函数和方法中的参数

- 使用1个`*`星号，表示python封装机制，可用于列表封装与拆封
- 使用2个`*`星号，将一个字典传递给函数，把字典中的键作为参数名，将值传递给函数的相应参数
- 函数的接口越通用并能够在越高的抽象层级使用，其可重用性就越高