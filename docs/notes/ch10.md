# 第10章 整洁的架构

## 1 从整洁代码到整洁架构

- 关注点分离：组件尽可能小，高内聚和低耦合，让不同的组件承担不同的职责
  1. 找出可能被重用多次的通用逻辑，并将其放在一个Python包中
  2. 采用微服务架构，将应用程序分成多个小型服务
- 将不同职责分配给不同的服务，将其封装在可被众多其他服务调用的微服务中
- 抽象：代码必须有很强的表达力，并使用正确的抽象来揭示核心问题的解决方案

## 2 软件组件

- 包：用于分发软件和重用代码，动机很多，包括大规模重用代码、确保概念方面的完整性
- python项目打包的注意事项：
  1. 通过测试核实安装是独立于平台的，不依赖于任何本地设置
  2. 确保单元测试不随被构建的包一起发布
  3. 分离依赖
  4. 最好为经常需要使用的命令创建一个入口
- 管理依赖：使用pip-tools导出依赖文件
- 管理依赖的注意事项：内部依赖仓库需要及时更新，并配置其他所有仓库，使其在有新的依赖版本时进行更新
- 工件版本：必须在软件的稳定性和尖端性之间权衡